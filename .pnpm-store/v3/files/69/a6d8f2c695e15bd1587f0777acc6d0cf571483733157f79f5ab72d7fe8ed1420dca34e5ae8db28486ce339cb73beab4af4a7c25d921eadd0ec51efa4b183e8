import { defineEventHandler, sendRedirect, getQuery } from "h3";
import { getKindeClient } from "../utils/client.mjs";
import { useRuntimeConfig } from "#imports";
export default defineEventHandler(async (event) => {
  const { kinde: kindeSettings } = useRuntimeConfig();
  const query = getQuery(event);
  const registerURL = await getKindeClient().register(event.context.kinde.sessionManager, {
    authUrlParams: {
      audience: kindeSettings.audience,
      ...query
    }
  });
  await sendRedirect(event, registerURL.href);
});
